{"version":3,"sources":["lib/component/DiagramSlotComponent.tsx","lib/component/DiagramBlockComponent.tsx","lib/state/helpers.ts","lib/component/buttons/AddButtonComponent.tsx","lib/component/buttons/RemoveButtonComponent.tsx","lib/component/DiagramButtonComponet.tsx","lib/component/DiagramConnectionComponent.tsx","logging/Config.ts","lib/component/DiagramSceneComponent.tsx","lib/state/DiagramBlock.ts","lib/state/DiagramButton.ts","lib/state/DiagramConnection.ts","lib/state/DiagramSlot.ts","lib/layout/DiagramButtonLayout.ts","lib/state/DiagramStructure.ts","lib/layout/DiagramSlotLayout.ts","lib/layout/DiagramConnectionLayout.ts","lib/layout/DiagramBlockLayout.ts","lib/state/DiagramScene.ts","lib/convert/DiagramConvert.ts","lib/component/DiagramEditComponent.tsx","components/MindMapComponent.tsx","lib/state/DiagramImage.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["DiagramSlotComponent","observer","transform","this","props","slot","position","x","y","onClick","evt","r","fill","React","Component","BlockImageElement","myRef","createRef","current","rect","getBoundingClientRect","onSize","width","height","block","image","ref","xlinkHref","ScaledSvgText","getBBox","style","pointerEvents","userSelect","dominantBaseline","textAnchor","name","observable","DiagramBlockComponent","onTextSize","size","textSize","updateRequestedSize","onImageSize","imageSize","translate","onMouseDown","onDoubleClick","rx","isSelected","isHovered","type","isEdited","slots","map","key","requestedWidth","onSelect","clientX","clientY","stopPropagation","click","doubleClick","computed","Rect","p","other","MapList","Map","value","values","get","push","set","length","keys","uuidv4","replace","c","Math","random","toString","removeItems","array","elems","elem","index","indexOf","splice","distance","v","sqrt","AddButtonComponent","id","ry","stroke","strokeWidth","d","RemoveButtonComponent","DiagramButtonComponent","element","button","color","icon","DiagramConnectionComponent","x1","connection","fromPoint","y1","x2","toPoint","y2","CategoryServiceFactory","setDefaultConfiguration","CategoryConfiguration","LogLevel","Info","logMindMap","Category","mindMapDragLog","logDiagramBlockLayout","logDigramSceneComponent","DiagramSceneComponent","x0","y0","mouseDownPos","selectionBlock","dx","dy","diagramScene","sceneTranslate","left","top","sceneTranslateDelta","xmlns","xmlnsXlink","onMouseMove","onMouseUp","diagramBlocks","uid","selectedBlock","hoverBlock","editedBlock","pos","diagramConnections","activeButtons","clientToScene","setEditedBlock","undefined","info","onEdit","pageX","pageY","mousePos","contains","setPosition","dragEnd","client","action","DiagramBlock","debugIdx","fireChangeRect","fireClick","fireDoubleClick","fireDragEnd","name2slot","clickCallbacks","doubleClickCallbacks","changeRectCallbacks","dragEndCallbacks","callback","DiagramButton","positionHint","on","DiagramConnection","from","to","blockUid","DiagramSlot","DiagramButtonLayout","buttons","regionButtons","D","DiagramStructure","scene","keepAlive","blockConnections","output","filter","input","childBlocks","getChildBlocks","rootDir","connections","blocks","res","columnIdx","delta","updateBlockPosition","result","console","log","rootBlock","outputConnections","leftConnections","rightConnections","DiagramSlotLayout","diagramStructure","Error","rightChildBlocks","getOutputSlotConnections","rightBlocks","leftChildBlocks","leftBlocks","DiagramConnectionLayout","disposers","disposer","fromBlock","toBlock","autorun","setConnectionPosition","delay","fromPosition","toPosition","defaultMMLayoutParams","hMargin","vMargin","DiagramBlockLayout","parameters","blockColumns","columnBlocks","childShift","blockHeight","blockChildWidth","columnWidth","columnCenter","blockPosition","inputConnections","i","empty","inputBlockConnections","oldColumn","newColumn","layoutColumns","columns","Array","sort","a","b","firstColumn","lastColumn","column","maxWidth","max","width1","updateChildHeight","updateChildPositions","blockUids","parentPos","totalHeight","childBlockUids","childrenHeight","parentUid","uids","blockIdxs","data","blockIdx","idx","xp","maxColumnIdx","minColumnIdx","min","DiagramScene","buttonLayout","slotLayout","blockLayout","connectionLayout","_previouseName","oldEditedBlock","changed","finishedEditing","layout","cancel","_editedBlock","layoutBlockButtons","getBlockColumnIdx","blockSide","selectParent","selectChild","getParentBlock","childBlock","getFistChildBlock","_selectedBlock","_previousSelection","DiagramConvert","json","root","children","addChildBlocksFromJson","right","jsonBlocks","parentBlock","jsonBlock","addChildBlocksFromScene","newBlock","EditPosition","styled","div","MyInput","MyComponent","focusOut","handleBlur","e","currentTarget","relatedTarget","target","focus","setSelectionRange","onFocus","onBlur","onChange","onKeyDown","DiagramEditComponent","copy","handleKeyDown","MM","MindMapComponent","addedBlock","vscode","addCallbacks","window","addEventListener","event","message","command","document","doc","setState","fromJSON","addBlock","addSibling","removeBlock","up","down","edit","jsonDiagram","toJSON","postMessage","addButton","removeButton","showBlockButtons","endDragging","newConnection","Slot","dragPosition","structure","inputBlock","occupiedBlocks","getBlocks","concat","parentBlockIdx","getChildIdx","newIdx","nextBlock","nextConnection","nextConnectionIdx","cidx","DiagramImage","App","acquireVsCodeApi","getState","files","fr","FileReader","onload","newImage","readAsDataURL","setImageUrl","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d4716741.chunk.js","sourcesContent":["import React from 'react';\nimport { DiagramSlot } from '../state/DiagramSlot';\nimport { observer } from 'mobx-react';\n\n@observer\nexport class DiagramSlotComponent extends React.Component<{ slot: DiagramSlot }> {\n    render() {\n        return <g transform={`translate(${this.props.slot.position.x},${this.props.slot.position.y}) rotate(0)`} onClick={evt => this.onClick(evt)} >\n            <circle r=\"3\" fill=\"gray\" />\n        </g>\n    }\n\n    onClick(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        //this.props.button.click()\n    }\n\n}","import React from 'react';\nimport { DiagramBlock } from '../state/DiagramBlock';\nimport { observer } from 'mobx-react'\nimport { DiagramSlotComponent } from './DiagramSlotComponent';\nimport { Vec2d } from '../state/helpers';\nimport { autorun, observable, computed } from 'mobx';\n\n\n@observer\nclass BlockImageElement extends React.Component<{ block: DiagramBlock, onSize: (size: Vec2d) => void }> {\n    private myRef = React.createRef<SVGImageElement>()\n\n\n    componentDidMount() {\n        if (this.myRef.current) {\n            let rect = this.myRef.current.getBoundingClientRect()\n            this.props.onSize({ x: rect.width, y: rect.height })\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.myRef.current) {\n            let rect = this.myRef.current.getBoundingClientRect()\n\n            this.props.onSize({ x: rect.width, y: rect.height })\n        }\n    }\n\n    render() {\n        return (this.props.block.image ? <image width=\"100\" ref={this.myRef} xlinkHref={this.props.block.image.image} /> : null)\n    }\n}\n\n\n@observer\nclass ScaledSvgText extends React.Component<{ block: DiagramBlock, onSize: (size: Vec2d) => void }> {\n    @observable size: Vec2d = { x: 0, y: 0 }\n    private myRef = React.createRef<SVGTextElement>()\n    constructor(props: any) {\n        super(props)\n\n    }\n\n\n    componentDidMount() {\n        if (this.myRef.current) {\n            this.props.onSize({ x: this.myRef.current.getBBox().width, y: this.myRef.current.getBBox().height })\n\n            //this.props.block.requestedWidth = this.myRef.current.getBBox().width + 20\n        }\n    }\n\n    render() {\n        return <text ref={this.myRef} style={{ pointerEvents: \"none\", userSelect: \"none\" }} x={this.props.block.rect.width / 2} y={this.props.block.rect.height / 2} dominantBaseline=\"middle\" textAnchor=\"middle\">{this.props.block.name}</text>\n\n    }\n}\n\n@observer\nexport class DiagramBlockComponent extends React.Component<{ block: DiagramBlock, isEdited: boolean, isSelected: boolean, isHovered: boolean, onSelect: (block: DiagramBlock, pos: Vec2d) => void }, {}> {\n    constructor(props: any) {\n        super(props)\n    }\n\n    @observable imageSize: Vec2d = { x: 0, y: 0 }\n\n    @observable textSize: Vec2d = { x: 0, y: 0 }\n    render() {\n\n\n        //{!(this.props.block.type===\"mmroot\"?:null)}\n        return  <g transform={`translate(${this.props.block.rect.x + this.props.block.translate.x},${this.props.block.rect.y + this.props.block.translate.y}) rotate(0)`} onMouseDown={evt => this.onMouseDown(evt)} onClick={evt => this.onClick(evt)} onDoubleClick={evt => this.onDoubleClick(evt)}>\n                <rect width={this.props.block.rect.width} height={this.props.block.rect.height} fill=\"white\" style={{ \"stroke\": \"#006600\" }} rx={5} />\n            {this.props.isSelected && <rect x={-3} y={-3} width={this.props.block.rect.width + 6} height={this.props.block.rect.height + 6} fill=\"none\" style={{ \"stroke\": \"#0000FF\", \"strokeWidth\": 2 }} rx={5} />}\n            {this.props.isHovered && <rect x={-3} y={-3} width={this.props.block.rect.width + 6} height={this.props.block.rect.height + 6} fill=\"none\" style={{ \"stroke\": \"#00FF00\", \"strokeWidth\": 2 }} rx={5} />}\n\n\n            {this.props.block.type === \"mmroot\" ? <rect x=\"3\" y=\"3\" width={this.props.block.rect.width - 6} height={this.props.block.rect.height - 6} fill=\"white\" style={{ \"stroke\": \"#006600\" }} rx={5} /> : null}\n            {!this.props.isEdited ? <ScaledSvgText block={this.props.block} onSize={this.onTextSize} /> : null\n            }\n            <BlockImageElement block={this.props.block} onSize={this.onImageSize} />\n            {this.props.block.slots.map(slot => <DiagramSlotComponent key={slot.key} slot={slot} />)}\n        </g>\n    }\n    onTextSize = (size: Vec2d) => {\n        this.textSize = size\n        this.updateRequestedSize()\n    }\n    onImageSize = (size: Vec2d) => {\n        this.imageSize = size\n        this.updateRequestedSize()\n    }\n\n\n    updateRequestedSize() {\n        this.props.block.requestedWidth = this.textSize.x + 20\n\n    }\n\n    @computed get fullSize(): Vec2d {\n        return this.textSize\n    }\n\n\n\n    onMouseDown(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n\n        this.props.onSelect(this.props.block, { x: evt.clientX, y: evt.clientY })\n        evt.stopPropagation()\n    }\n\n    onClick(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        this.props.block.click()\n        evt.stopPropagation()\n    }\n\n    onDoubleClick(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        this.props.block.doubleClick()\n    }\n\n}","import { func } from \"prop-types\"\nimport { observable } from \"mobx\"\n\nexport interface Vec2d { x: number, y: number }\n\nexport class Rect {\n    @observable x: number\n    @observable y: number\n    @observable width: number\n    @observable height: number\n\n    constructor(x: number, y: number, width: number, height: number) {\n        this.x = x\n        this.y = y\n        this.width = width\n        this.height = height\n    }\n\n    contains (p : Vec2d) :boolean {\n        if (p.x < this.x || p.x > this.x + this.width || p.y < this.y || p.y > this.y + this.height) return false\n        return true\n    }\n\n    static copy(other : Rect) {\n        return new Rect(other.x, other.y, other.width, other.height)\n    }\n}\n\nexport class MapList<Key, Value> {\n    map: Map<Key, Value[]> = new Map()\n\n    push(key: Key, value: Value) {\n        let values = this.map.get(key) || []\n        values.push(value)\n        this.map.set(key, values)\n    }\n\n    get(key: Key) {\n        return this.map.get(key) || []\n    }\n\n    empty(key: Key) {\n        return this.get(key).length === 0\n    }\n\n    keys() {\n        return this.map.keys()\n\n    }\n}\n\nexport function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\n        return v.toString(16);\n    });\n}\n\nexport function removeItems<T>(array: Array<T>, ...elems: T[]): Array<T> {\n    for (let elem of elems) {\n        let index = array.indexOf(elem)\n        if (index !== -1) {\n            array.splice(index, 1)\n        }\n    }\n    return array\n}\n\nexport function distance(v: Vec2d) {\n    return Math.sqrt(v.x * v.x + v.y * v.y)\n}","import React from 'react';\nimport { DiagramButton } from '../../state/DiagramButton';\n\nexport class AddButtonComponent extends React.Component {\n    render() {\n        return <g  >\n\n<g\n       id=\"g3979\"\n       transform=\"translate(-0.10620686,-0.56696429)\">\n      <rect\n         ry=\"1.0444876\"\n         y=\"-9.3742828\"\n         x=\"-9.8492556\"\n         height=\"19.63636\"\n         width=\"19.425177\"\n         id=\"rect3942\"\n         style={{fill:\"white\",stroke:\"#000000\",strokeWidth:\"1\"}} \n         />\n      <path\n         id=\"rect3944\"\n         d=\"m -3.3174074,-7.0890472 c -0.5786464,0 -1.0443792,0.4657354 -1.0443792,1.0443818 v 2.1626565 h -2.1626592 c -0.5786464,0 -1.0443818,0.4657355 -1.0443818,1.0443819 v 6.7313729 c 0,0.5786438 0.4657354,1.0443792 1.0443818,1.0443792 h 2.1626592 v 2.1626592 c 0,0.5786464 0.4657328,1.0443792 1.0443792,1.0443792 h 6.7313729 c 0.5786464,0 1.0443819,-0.4657328 1.0443819,-1.0443792 V 4.9381251 h 2.1626565 c 0.5786464,0 1.0443818,-0.4657354 1.0443818,-1.0443792 V -2.837627 c 0,-0.5786464 -0.4657354,-1.0443819 -1.0443818,-1.0443819 H 4.4583474 v -2.1626565 c 0,-0.5786464 -0.4657355,-1.0443818 -1.0443819,-1.0443818 z\"\n         style={{fill:\"purple\",stroke:\"#000000\",strokeWidth:\"1\"}} \n\n         />\n    </g>\n            \n\n        </g >\n    }\n\n}","import React from 'react';\nimport { DiagramButton } from '../../state/DiagramButton';\n\nexport class RemoveButtonComponent extends React.Component {\n    render() {\n        return <g  >\n\n            <g\n                id=\"g3979\"\n                transform=\"translate(-0.10620686,-0.56696429)\">\n                <rect\n                    ry=\"1.0444876\"\n                    y=\"-9.3742828\"\n                    x=\"-9.8492556\"\n                    height=\"19.63636\"\n                    width=\"19.425177\"\n                    id=\"rect3942\"\n                    style={{ fill: \"white\", stroke: \"#000000\", strokeWidth: \"1\" }}\n                />\n                <rect\n                    style={{ fill: \"white\", stroke: \"#000000\", strokeWidth: \"1\" }}\n\n                    id=\"rect4021\"\n                    width=\"15.485204\"\n                    height=\"8.2242823\"\n                    x=\"-7.7426019\"\n                    y=\"-4.1617403\"\n                    ry=\"0.98811853\" />\n            </g>\n\n\n        </g >\n    }\n\n}","import React from 'react';\nimport { DiagramButton } from '../state/DiagramButton';\nimport { AddButtonComponent } from './buttons/AddButtonComponent';\nimport { RemoveButtonComponent } from './buttons/RemoveButtonComponent';\n\nexport class DiagramButtonComponent extends React.Component<{ button: DiagramButton }> {\n    render() {\n        let element = <rect width={10} height={10} fill={this.props.button.color} ></rect>;\n        switch (this.props.button.icon) {\n            case \"add\":\n                element = <AddButtonComponent />\n                break;\n            case \"remove\":\n                element = <RemoveButtonComponent />\n                break;\n\n        }\n\n        return <g transform={`translate(${this.props.button.position.x},${this.props.button.position.y}) rotate(0)`} onClick={evt => this.onClick(evt)} >\n            {element}\n\n        </g>\n    }\n\n    onClick(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        \n        this.props.button.click()\n    }\n\n}","import React from 'react';\nimport { DiagramConnection } from '../state/DiagramConnection';\nimport { observer } from 'mobx-react';\n\n@observer\nexport class DiagramConnectionComponent extends React.Component<{ connection: DiagramConnection }> {\n\n    render() {\n        const x1 = this.props.connection.fromPoint.x;\n        const y1 = this.props.connection.fromPoint.y;\n        const x2 = this.props.connection.toPoint.x;\n        const y2 = this.props.connection.toPoint.y;\n        const lineStyle = { stroke: \"rgb(255,0,0)\", strokeWidth: \"2\" ,fill:\"none\" };\n        //return <line style={lineStyle} x1={x1} y1={y1} x2={x2} y2={y2} />\n        return <path style={lineStyle} d={`M ${x1} ${y1} C ${x2} ${y1} ${x1} ${y2} ${x2} ${y2}`}/>\n    }\n\n}","import {Category,CategoryLogger,CategoryServiceFactory,CategoryConfiguration,LogLevel} from \"typescript-logging\";\n \n// Optionally change default settings, in this example set default logging to Info.\n// Without changing configuration, categories will log to Error.\nCategoryServiceFactory.setDefaultConfiguration(new CategoryConfiguration(LogLevel.Info));\n \n\n\n// Create categories, they will autoregister themselves, one category without parent (root) and a child category.\nexport const logMindMap = new Category(\"mindMap\");\nexport const mindMapDragLog = new Category(\"draging\", logMindMap);\nexport const logDiagramBlockLayout = new Category(\"diagramBlockLayout\", logMindMap);\n\nexport const logDigramSceneComponent = new Category(\"DiagramSceneComponent\");\n\n//export const catProdLog = new Category(\"product\", mindMapLog);","import React from 'react';\nimport { DiagramBlockComponent } from './DiagramBlockComponent';\nimport { DiagramBlock } from '../state/DiagramBlock';\nimport { DiagramScene } from '../state/DiagramScene';\nimport { observer } from 'mobx-react';\nimport { Vec2d, distance } from '../state/helpers';\nimport { DiagramButtonComponent } from './DiagramButtonComponet';\nimport { DiagramConnectionComponent } from './DiagramConnectionComponent';\nimport { observable, action } from 'mobx';\nimport { logDigramSceneComponent } from '../../logging/Config';\n\n\n@observer\nexport class DiagramSceneComponent extends React.Component<{ diagramScene: DiagramScene }, {}> {\n\n    x0 : number = 0\n    y0 : number = 0\n    mouseDownPos?: Vec2d\n    selectionBlock?: DiagramBlock\n    @observable hoverBlock? : DiagramBlock \n    private myRef = React.createRef<SVGSVGElement>()\n\n    componentDidMount() {\n        if (this.myRef.current) {\n            let dx = this.myRef.current.getBoundingClientRect().width / 2\n            let dy = this.myRef.current.getBoundingClientRect().height / 2\n            this.props.diagramScene.sceneTranslate.x = dx\n            this.props.diagramScene.sceneTranslate.y = dy\n            this.x0 = this.myRef.current.getBoundingClientRect().left\n            this.y0 = this.myRef.current.getBoundingClientRect().top\n\n        }\n    }\n\n\n    render() {\n        let dx = this.props.diagramScene.sceneTranslate.x + this.props.diagramScene.sceneTranslateDelta.x\n        let dy = this.props.diagramScene.sceneTranslate.y + this.props.diagramScene.sceneTranslateDelta.y\n        return <svg\n            ref={this.myRef}\n            width=\"100%\"\n            height=\"100%\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n            onMouseDown={evt => this.onMouseDown(evt)}\n            onMouseMove={evt => this.onMouseMove(evt)}\n            onMouseUp={evt => this.onMouseUp(evt)}\n            onClick={evt => this.onClick(evt)}\n\n        >\n\n            <g transform={`translate(${dx},${dy})`}>\n                {this.props.diagramScene.diagramBlocks.map(block =>\n                    <DiagramBlockComponent key={block.uid} block={block} isSelected={this.props.diagramScene.selectedBlock === block} isHovered={this.hoverBlock === block} isEdited={this.props.diagramScene.editedBlock === block} onSelect={(block, pos) => this.onSelect(block, pos)} />\n                )}\n                {this.props.diagramScene.diagramConnections.map(element =>\n                    <DiagramConnectionComponent key={element.uid} connection={element} />\n                )}\n\n\n                {this.props.diagramScene.activeButtons.map(button => <DiagramButtonComponent key={button.uid} button={button} />)}\n            </g>\n        </svg>\n\n    }\n\n\n    onSelect(block: DiagramBlock, pos: Vec2d) {\n        this.mouseDownPos = this.clientToScene(pos)\n        this.selectionBlock = block\n        this.props.diagramScene.selectedBlock = block\n        this.props.diagramScene.setEditedBlock(undefined)\n\n    }\n\n    @action\n    onMouseDown(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        logDigramSceneComponent.info(\"onMouseDown\")\n        if (this.props.diagramScene.editedBlock) {\n            this.props.diagramScene.setEditedBlock(undefined)\n            this.props.diagramScene.onEdit = true\n        }\n\n        this.mouseDownPos = this.clientToScene({ x: evt.pageX, y: evt.pageY })\n\n    }\n\n\n    onMouseMove(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        if (this.mouseDownPos && this.selectionBlock) {\n            logDigramSceneComponent.info(\"onMouseMove block\")\n            let mousePos = this.clientToScene({ x: evt.pageX, y: evt.pageY })\n            this.selectionBlock.translate = { x: mousePos.x - this.mouseDownPos.x, y: mousePos.y - this.mouseDownPos.y }\n            this.props.diagramScene.activeButtons = []\n\n            this.hoverBlock = undefined\n            for (let block of this.props.diagramScene.diagramBlocks) {\n                if (block != this.selectionBlock) {\n                    let rect = block.rect\n                    if (rect.contains(mousePos)) this.hoverBlock = block\n                } \n            }\n\n        } else if (this.mouseDownPos) {\n            logDigramSceneComponent.info(\"onMouseMove scene\")\n            let mousePos = this.clientToScene({ x: evt.pageX, y: evt.pageY });\n            let dx = mousePos.x - this.mouseDownPos.x\n            let dy = mousePos.y - this.mouseDownPos.y\n            let delta = distance({ x: dx, y: dy })\n            if (delta > 40)\n                this.props.diagramScene.sceneTranslateDelta = { x: dx, y: dy }\n\n        }\n    }\n\n    @action\n    onMouseUp(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        logDigramSceneComponent.info(\"onMouseUp\")\n        this.hoverBlock = undefined\n        if (this.selectionBlock && this.mouseDownPos) {\n            let mousePos = this.clientToScene({ x: evt.pageX, y: evt.pageY })\n            let translate = { x: mousePos.x - this.mouseDownPos.x, y: mousePos.y - this.mouseDownPos.y }\n            let dist = distance(translate)\n            if (dist > 20) {\n\n\n                let position = { x: this.selectionBlock.rect.x + mousePos.x - this.mouseDownPos.x, y: this.selectionBlock.rect.y + mousePos.y - this.mouseDownPos.y, }\n                this.selectionBlock.setPosition(position)\n                this.selectionBlock.dragEnd(mousePos)\n            } else {\n                this.selectionBlock.translate = { x: 0, y: 0 }\n            }\n            this.selectionBlock = undefined\n            this.mouseDownPos = undefined\n\n        } else if (this.mouseDownPos) {\n            let mousePos = this.clientToScene({ x: evt.pageX, y: evt.pageY })\n\n            let dx = mousePos.x - this.mouseDownPos.x\n            let dy = mousePos.y - this.mouseDownPos.y\n            let delta = distance({ x: dx, y: dy })\n            if (delta > 40) {\n\n                this.props.diagramScene.sceneTranslate.x += dx;\n                this.props.diagramScene.sceneTranslate.y += dy;\n            }\n            this.props.diagramScene.sceneTranslateDelta = { x: 0, y: 0 }\n            this.mouseDownPos = undefined\n\n        }\n\n    }\n\n    clientToScene(client: Vec2d): Vec2d {\n        return { x: client.x - this.props.diagramScene.sceneTranslate.x - this.x0, y: client.y - this.props.diagramScene.sceneTranslate.y - this.y0 }\n    }\n\n    onClick(evt: React.MouseEvent<SVGElement, MouseEvent>) {\n        this.props.diagramScene.activeButtons = []\n        //this.props.diagramScene.selectedBlock = undefined\n\n    }\n\n}","import { Vec2d, Rect } from \"./helpers\";\nimport { observable, action, computed } from \"mobx\"\nimport { DiagramConnection } from \"./DiagramConnection\";\nimport { DiagramSlot } from \"./DiagramSlot\";\nimport { DiagramImage } from \"./DiagramImage\";\n\ntype BlockEvents = \"click\" | \"doubleClick\"| \"dragStart\" | \"dragEnd\" |\n    \"dropBlock\" | \"dropConnection\" |\n    \"overMouse\" | \"overDragBlock\" | \"overDragConnection\" |\n    \"selected\" | \"changeName\" | \"changeRect\";\n\ntype BlockCallback = (block: DiagramBlock) => void\ntype BlockPositionCallback = (block: DiagramBlock, position: Vec2d) => void\ntype ConnectionCallback = (connection: DiagramConnection) => void\n\nclass DiagramBlockCallbacks {\n    clickCallbacks: BlockCallback[] = []\n    doubleClickCallbacks : BlockCallback[] =[] \n    changeRectCallbacks: BlockCallback[] = []\n    dragEndCallbacks: BlockPositionCallback[] = []\n    on(evt: BlockEvents, callback: BlockCallback | ConnectionCallback | BlockPositionCallback) {\n        switch (evt) {\n            case \"click\":\n                this.clickCallbacks.push(callback as BlockCallback)\n                break\n            case \"doubleClick\":\n                this.doubleClickCallbacks.push(callback as BlockCallback)\n                break\n\n            case \"changeRect\":\n                this.changeRectCallbacks.push(callback as BlockCallback)\n                break\n\n            case \"dragEnd\":\n                this.dragEndCallbacks.push(callback as BlockPositionCallback)\n\n        }\n    }\n\n    protected fireClick(block: DiagramBlock) {\n        for (let callback of this.clickCallbacks) callback(block)\n    }\n\n\n    protected fireDoubleClick(block: DiagramBlock) {\n        for (let callback of this.doubleClickCallbacks) callback(block)\n    }\n\n\n    protected fireChangeRect(block: DiagramBlock) {\n        for (let callback of this.changeRectCallbacks) callback(block)\n    }\n\n    protected fireDragEnd(block: DiagramBlock, position: Vec2d) {\n        for (let callback of this.dragEndCallbacks) callback(block, position)\n    }\n}\n\nexport class DiagramBlockStyle {\n    fill : string  = \"white\"\n    stroke : string = \"white\"\n    rx = 5\n    nstroke = 1 \n}\n\n\n\nexport class DiagramBlock extends DiagramBlockCallbacks {\n    uid: string\n    @observable name: string\n    type: string\n    @observable rect: Rect\n    @observable translate: Vec2d\n    @observable slots: DiagramSlot[]\n    @observable debugIdx: number\n    @observable finishedEditing : boolean = true\n    @observable requestedWidth ?: number \n    @observable image? : DiagramImage \n    @observable imageUrl : string = \"\"\n\n    constructor(uid: string, name: string, type: string, slots: DiagramSlot[], rect: Rect, image? : DiagramImage) {\n        super()\n        this.uid = uid\n        this.name = name\n        this.type = type\n        this.slots = slots\n        this.rect = rect\n        this.debugIdx = 0\n        this.translate = { x: 0, y: 0 }\n        this.image = image\n    }\n\n    @action setPosition(position: Vec2d) {\n        this.translate = { x: 0, y: 0 }\n\n        this.rect.x = position.x\n        this.rect.y = position.y\n        this.fireChangeRect(this)\n    }\n\n    click() { this.fireClick(this) }\n    doubleClick() { this.fireDoubleClick(this) }\n\n    dragEnd(position: Vec2d) { this.fireDragEnd(this, position) }\n\n\n    @computed get name2slot(): Map<string, DiagramSlot> {\n        let name2slot = new Map<string, DiagramSlot>()\n        for (let slot of this.slots) name2slot.set(slot.name, slot)\n        return name2slot\n    }\n\n}\n","import { Vec2d } from \"./helpers\";\n\nexport type DiagramButtonPositionHint = \"topLeft\" | \"topRight\" |\n    \"rightTop\" | \"rightBottom\" |\n    \"bottomLeft\" | \"bottomRight\" |\n    \"leftTop\" | \"leftBottom\"\n\nexport type ButtonIcon  = \"add\" | \"remove\"\n\nexport class DiagramButton {\n    position: Vec2d = { x: 0, y: 0 }\n\n    protected clickCallbacks: (() => void)[] = []\n    \n    constructor(public uid: string, public positionHint: DiagramButtonPositionHint, public icon: ButtonIcon, public color: string, callback?: () => void, ) {\n        if (callback) this.on(\"click\", callback)\n    }\n\n    click() { \n        for (let callback of this.clickCallbacks) callback()    \n    }\n    \n    on(evt: \"click\", callback: () => void) { this.clickCallbacks.push(callback) }\n}","import { DiagramEndpoint } from \"./DiagramEndpoint\";\nimport { Vec2d } from \"./helpers\";\nimport { observable } from \"mobx\";\n\nexport class DiagramConnection {\n    @observable fromPoint : Vec2d  \n    @observable toPoint : Vec2d\n    constructor(public from: DiagramEndpoint, public to: DiagramEndpoint, public type: string) { \n        this.fromPoint = {x : 0, y : 0}\n        this.toPoint = {x : 0, y : 0}\n    }\n\n    get uid() {\n        return `${this.from.blockUid}:${this.from.slot}:${this.to.blockUid}:${this.to.slot}`\n    }\n}\n\n","import { Vec2d } from \"./helpers\";\nimport { observable } from \"mobx\";\n\nexport class DiagramSlot {\n    @observable position: Vec2d\n    constructor(public name: string, public type: string, position: Vec2d = { x: 0, y: 0 }) { this.position = position }\n\n    get key() {\n        return this.name\n    }\n}\n","import { DiagramBlock } from \"../state/DiagramBlock\";\nimport { DiagramButton, DiagramButtonPositionHint } from \"../state/DiagramButton\";\nimport { MapList } from \"../state/helpers\";\n\nexport class DiagramButtonLayout {\n    layoutBlockButtons(block : DiagramBlock, buttons :DiagramButton[]) {\n        let regionButtons: MapList<DiagramButtonPositionHint, DiagramButton> = new MapList()\n\n        for (let button  of buttons) {\n            regionButtons.push(button.positionHint, button)\n        }\n\n        let rect = block.rect\n        let D = 20\n        let x = rect.x + rect.width - D / 2\n        let y = rect.y - D / 2 - D *0.2\n\n        for (let button of regionButtons.get(\"topRight\")) {\n            button.position = {x,y}\n            x -= D * 1.2\n        }\n\n\n    }\n}","import { DiagramScene } from \"./DiagramScene\";\nimport { computed } from \"mobx\";\nimport { DiagramBlock } from \"./DiagramBlock\";\nimport { DiagramConnection } from \"./DiagramConnection\";\nimport { MapList } from \"./helpers\";\nimport { Block } from \"@babel/types\";\nimport { keepAlive } from \"mobx-utils\";\n\nexport class DiagramStructure {\n    constructor(public scene: DiagramScene) {\n        keepAlive(this, \"blocks\")\n        keepAlive(this, \"blockConnections\")\n        keepAlive(this, \"columnBlocks\")\n    }\n\n    @computed get blocks(): Map<string, DiagramBlock> {\n        let result = new Map<string, DiagramBlock>()\n        for (let block of this.scene.diagramBlocks) { result.set(block.uid, block) }\n        return result\n    }\n\n\n    @computed get blockConnections(): { input: MapList<string, DiagramConnection>, output: MapList<string, DiagramConnection> } {\n        let input = new MapList<string, DiagramConnection>()\n        let output = new MapList<string, DiagramConnection>()\n        for (let connection of this.scene.diagramConnections) {\n            input.push(connection.to.blockUid, connection)\n            output.push(connection.from.blockUid, connection)\n        }\n        return { input, output }\n    }\n\n    getOutputSlotConnections(blockUid: string, slot: string): DiagramConnection[] {\n        return this.blockConnections.output.get(blockUid).filter(connection => (connection.from.slot === slot))\n    }\n\n    getInputSlotConnections(blockUid: string, slot: string): DiagramConnection[] {\n        return this.blockConnections.input.get(blockUid).filter(connection => (connection.to.slot === slot))\n    }\n\n    getChildBlocks(blockUid: string): string[] {\n        let childBlocks: string[] = []\n        for (let connection of this.blockConnections.output.get(blockUid)) {\n            childBlocks.push(connection.to.blockUid)\n            childBlocks.push(...this.getChildBlocks(connection.to.blockUid))\n        }\n        return childBlocks\n    }\n\n    getFistChildBlock(block: DiagramBlock, rootDir: 1 | -1) {\n        if (block.type === \"mmroot\") {\n            let connections = this.blockConnections.output.get(block.uid)\n            if (rootDir === 1) connections = connections.filter(connection => connection.from.slot === \"or\")\n            else connections = connections.filter(connection => connection.from.slot === \"ol\")\n            if (connections.length > 0) return this.blocks.get(connections[0].to.blockUid) as DiagramBlock\n\n\n\n        } else {\n            let childBlocks = this.getChildBlocks(block.uid)\n            if (childBlocks.length > 0) return this.blocks.get(childBlocks[0]) as DiagramBlock\n        }\n    }\n\n\n    getParentBlock(block: DiagramBlock) {\n        if (block.type === \"mmroot\") return block\n        else {\n            return this.blocks.get(this.blockConnections.input.get(block.uid)[0].from.blockUid) as DiagramBlock\n        }\n    }\n\n    @computed get columnBlocks(): MapList<number, DiagramBlock> {\n        console.log(\"columnBlock\")\n        let res = new MapList<number, DiagramBlock>()\n        let rootBlock = this.scene.diagramBlocks[0]\n        res.push(0, rootBlock)\n        let outputConnections = this.blockConnections.output.get(rootBlock.uid)\n        let leftConnections = outputConnections.filter(connection => connection.from.slot === \"ol\")\n        for (let connection of leftConnections) {\n            this.updateBlockPosition(res, connection, 0, -1)\n        }\n        let rightConnections = outputConnections.filter(connection => connection.from.slot === \"or\")\n        for (let connection of rightConnections) {\n            this.updateBlockPosition(res, connection, 0, 1)\n        }\n        return res\n    }\n\n    private updateBlockPosition(res: MapList<number, DiagramBlock>, connection: DiagramConnection, columnIdx: number, delta: 1 | -1) {\n        let block = this.blocks.get(connection.to.blockUid) as DiagramBlock\n        res.push(columnIdx + delta, block)\n        for (let connection of this.blockConnections.output.get(block.uid)) {\n            this.updateBlockPosition(res, connection, columnIdx + delta, delta)\n        }\n    }\n\n    public getBlockColumnIdx(block: DiagramBlock) {\n        if (block.type === \"mmroot\") return 0\n        else {\n            let columnIdx = 0\n            while (true) {\n                let connection = this.blockConnections.input.get(block.uid)[0]\n                columnIdx += 1\n                block = this.blocks.get(connection.from.blockUid) as DiagramBlock\n                if (block.type === \"mmroot\") {\n                    if (connection.from.slot === \"ol\") return -columnIdx\n                    else return columnIdx\n                }\n            }\n        }\n    }\n\n    public blockSide(block: DiagramBlock) {\n        if (block.type === \"mmroot\") {\n            return 0\n        }\n        else {\n            let connection = this.blockConnections.input.get(block.uid)[0]\n\n            while (block.type !== \"mmroot\") {\n                connection = this.blockConnections.input.get(block.uid)[0]\n                block = this.blocks.get(connection.from.blockUid) as DiagramBlock\n            }\n\n            if (connection.from.slot === \"ol\") return -1\n            else return 1\n        }\n    }\n\n}","import { DiagramStructure } from \"../state/DiagramStructure\";\nimport { DiagramBlock } from \"../state/DiagramBlock\";\nimport { action } from \"mobx\";\n\nexport class DiagramSlotLayout {\n    constructor(protected diagramStructure: DiagramStructure) {\n\n    }\n\n    @action\n    layout() {\n        let rootBlock = this.diagramStructure.scene.diagramBlocks[0]\n\n        if (rootBlock.type !== \"mmroot\") throw new Error(\"Invalid diagram structure\")\n        rootBlock.slots[0].position = { x: 0, y: rootBlock.rect.height / 2 }\n        rootBlock.slots[1].position = { x: rootBlock.rect.width, y: rootBlock.rect.height / 2 }\n\n        let rightChildBlocks = this.diagramStructure.getOutputSlotConnections(rootBlock.uid, \"or\")\n        let rightBlocks: string[] = []\n        for (let block of rightChildBlocks) {\n            rightBlocks.push(block.to.blockUid)\n            rightBlocks.push(...this.diagramStructure.getChildBlocks(block.to.blockUid))\n        }\n        let leftChildBlocks = this.diagramStructure.getOutputSlotConnections(rootBlock.uid, \"ol\")\n        let leftBlocks: string[] = []\n        for (let block of leftChildBlocks) {\n            leftBlocks.push(block.to.blockUid)\n            leftBlocks.push(...this.diagramStructure.getChildBlocks(block.to.blockUid))\n            //leftBlocks = leftBlocks.concat(,this.diagramData.getChildBlocks(block.toEndpoint.block))\n        }\n\n        for (let blockUid of rightBlocks) {\n            let block = this.diagramStructure.blocks.get(blockUid) as DiagramBlock\n            block.slots[0].position = { x: 0, y: block.rect.height / 2 }\n            block.slots[1].position = { x: block.rect.width, y: block.rect.height / 2 }\n        }\n\n        for (let blockUid of leftBlocks) {\n            let block = this.diagramStructure.blocks.get(blockUid) as DiagramBlock\n            block.slots[0].position = { x: block.rect.width, y: block.rect.height / 2 }\n            block.slots[1].position = { x: 0, y: block.rect.height / 2 }\n        }\n\n\n    }\n}","import { DiagramStructure } from \"../state/DiagramStructure\";\nimport { DiagramBlock } from \"../state/DiagramBlock\";\nimport { Vec2d } from \"../state/helpers\";\nimport { DiagramSlot } from \"../state/DiagramSlot\";\nimport { autorun, IReactionDisposer } from \"mobx\";\nimport { DiagramConnection } from \"../state/DiagramConnection\";\n\nexport class DiagramConnectionLayout {\n    constructor(private diagramStructure: DiagramStructure) { }\n    disposers : IReactionDisposer[] = []\n\n    layout() {\n        for (let disposer of this.disposers) disposer()\n\n        for (let connection of this.diagramStructure.scene.diagramConnections) {\n            let fromBlock = this.diagramStructure.blocks.get(connection.from.blockUid) as DiagramBlock\n            let toBlock = this.diagramStructure.blocks.get(connection.to.blockUid) as DiagramBlock\n            this.disposers.push(autorun(() => this.setConnectionPosition(connection, fromBlock, toBlock), {delay : 30 }))\n        }\n    }\n\n    setConnectionPosition(connection: DiagramConnection, fromBlock: DiagramBlock, toBlock: DiagramBlock) {\n        let fromPosition: Vec2d = (fromBlock.name2slot.get(connection.from.slot) as DiagramSlot).position\n        let toPosition: Vec2d = (toBlock.name2slot.get(connection.to.slot) as DiagramSlot).position\n        connection.fromPoint = { x: fromPosition.x + fromBlock.rect.x + fromBlock.translate.x, y: fromPosition.y + fromBlock.rect.y + fromBlock.translate.y }\n        connection.toPoint = { x: toPosition.x + toBlock.rect.x + toBlock.translate.x, y: toPosition.y + toBlock.rect.y+ toBlock.translate.y }\n    }\n}","import { DiagramStructure } from \"../state/DiagramStructure\";\nimport { MapList, Vec2d, Rect } from \"../state/helpers\";\nimport { DiagramBlock } from \"../state/DiagramBlock\";\nimport { logDiagramBlockLayout } from \"../../logging/Config\";\nlet defaultMMLayoutParams = {\n    hMargin: 30,\n    vMargin: 10\n}\n\nexport class DiagramBlockLayout {\n    blockColumns: Map<string, number> = new Map();\n    columnBlocks: MapList<number, string> = new MapList();\n    childShift: Map<string, number[]> = new Map()\n    blockHeight: Map<string, number> = new Map()\n    blockChildWidth: Map<string, number> = new Map()\n    columnWidth: Map<number, number> = new Map()\n    columnCenter: Map<number, number> = new Map()\n    blockPosition: Map<string, Vec2d> = new Map()\n\n    constructor(private diagramStructure: DiagramStructure, public parameters = defaultMMLayoutParams) { }\n\n\n\n    layoutColumns() {\n        if (!this.diagramStructure) throw new Error(\"Diagram data not defined\")\n        let blocks = this.diagramStructure.scene.diagramBlocks;\n        this.blockColumns = new Map()\n        this.columnBlocks = new MapList()\n        let inputConnections = this.diagramStructure.blockConnections.input\n        for (let i = 0; i < blocks.length; ++i) {\n            if (i === 0) {\n                this.blockColumns.set(blocks[i].uid, 0)\n                this.columnBlocks.push(i, blocks[i].uid)\n                if (!inputConnections.empty(blocks[i].uid)) {\n                    throw new Error(\"Invalid mm diagram blocks structure (first block must be root block - no input connections)\")\n                }\n            } else {\n                let inputBlockConnections = inputConnections.get(blocks[i].uid)\n                if (inputBlockConnections.length !== 1) {\n                    throw new Error(\"Invalid mm diagram blocks structure (each block except root must have exactly one input connection )\")\n                }\n\n                let oldColumn = this.blockColumns.get(inputBlockConnections[0].from.blockUid)\n                if (oldColumn === undefined) {\n                    throw new Error(\"Invalid mm diagram blocks structure (parent block must preceed child block)\")\n                } else {\n                    let newColumn = oldColumn\n                    if (newColumn === 0) {\n                        if (inputBlockConnections[0].from.slot === \"or\") {\n                            newColumn += 1\n                        } else {\n                            newColumn -= 1\n                        }\n                    } else if (newColumn > 0) newColumn += 1\n                    else if (newColumn < 0) newColumn -= 1\n                    this.blockColumns.set(blocks[i].uid, newColumn)\n                    this.columnBlocks.push(newColumn, blocks[i].uid)\n                }\n            }\n        }\n    }\n\n\n\n    layout() {\n        let { input, output } = this.diagramStructure.blockConnections\n\n        this.layoutColumns()\n\n        let columns = Array.from(this.columnBlocks.keys()).sort((a, b) => (a - b))\n        let firstColumn = columns[0]\n        let lastColumn = columns[columns.length - 1]\n\n        for (let column = firstColumn; column <= lastColumn; ++column) {\n            let maxWidth = 0\n            for (let block of this.columnBlocks.get(column) as string[]) {\n                maxWidth = Math.max(maxWidth, (this.diagramStructure.blocks.get(block) as DiagramBlock).rect.width)\n            }\n            this.columnWidth.set(column, maxWidth)\n        }\n\n        let x = 0\n        this.columnCenter.set(0, 0)\n        for (let column = 1; column <= lastColumn; ++column) {\n            let width = this.columnWidth.get(column - 1) as number\n            let width1 = this.columnWidth.get(column) as number\n            x = x + width / 2 + this.parameters.hMargin + width1 / 2\n            this.columnCenter.set(column, x)\n        }\n        x = 0\n\n        for (let column = -1; column >= firstColumn; --column) {\n            let width = this.columnWidth.get(column + 1) as number\n            let width1 = this.columnWidth.get(column) as number\n            x = x - width / 2 - this.parameters.hMargin - width1 / 2\n            this.columnCenter.set(column, x)\n        }\n        let rootBlock = this.diagramStructure.scene.diagramBlocks[0]\n        if (input.get(rootBlock.uid).length > 0) {\n            throw new Error(\"Invalid diagram structure, root block has input connections\")\n        }\n\n        for (let connection of output.get(rootBlock.uid)) {\n            this.updateChildHeight(connection.to.blockUid)\n        }\n\n        this.blockPosition.set(rootBlock.uid, { x: 0, y: 0 })\n\n\n        this.updateChildPositions(1, this.columnBlocks.get(1), { x: 0, y: 0 })\n        this.updateChildPositions(-1, this.columnBlocks.get(-1), { x: 0, y: 0 })\n\n        for (let block of this.diagramStructure.scene.diagramBlocks) {\n            let position = this.blockPosition.get(block.uid) as Vec2d\n            block.rect = new Rect(position.x - block.rect.width / 2,  position.y - block.rect.height / 2, block.rect.width, block.rect.height)\n            \n\n        }\n    }\n\n    updateChildPositions(column: number, blockUids: string[], parentPos: Vec2d) {\n        if (!this.diagramStructure) throw new Error(\"Diagram data not defined\")\n        let totalHeight = 0\n        for (let blockUid of blockUids) {\n            let height = this.blockHeight.get(blockUid) as number\n            totalHeight += height\n        }\n        totalHeight += (blockUids.length - 1) * this.parameters.vMargin;\n        let y = parentPos.y - totalHeight / 2\n        let x = this.columnCenter.get(column) as number\n        if (column > 0) column += 1\n        else column -= 1\n        for (let blockUid of blockUids) {\n            let height = this.blockHeight.get(blockUid) as number\n            let pos = { x, y: y + height / 2 }\n            this.blockPosition.set(blockUid, pos)\n            let childBlockUids = this.diagramStructure.blockConnections.output.get(blockUid).map(connection => connection.to.blockUid)\n            this.updateChildPositions(column, childBlockUids, pos)\n            y += height + this.parameters.vMargin\n        }\n\n    }\n    updateChildHeight(blockUid: string) {\n        let block = this.diagramStructure.blocks.get(blockUid) as DiagramBlock\n        let outputConnections = this.diagramStructure.blockConnections.output.get(blockUid)\n        let childrenHeight = 0\n        for (let connection of outputConnections) {\n            childrenHeight += this.updateChildHeight(connection.to.blockUid)\n        }\n        childrenHeight += this.parameters.vMargin * (outputConnections.length - 1)\n        let blockHeight = Math.max(childrenHeight, block.rect.height)\n        this.blockHeight.set(blockUid, blockHeight)\n        return blockHeight\n    }\n\n    getBlockColumn(block: string): number {\n        return this.blockColumns.get(block) as number\n    }\n\n\n    getBlocks(pos: Vec2d): DiagramBlock[] {\n        let res: DiagramBlock[] = []\n        for (let block of this.diagramStructure.scene.diagramBlocks) {\n            let rect = block.rect\n            if ((pos.x > rect.x) && (pos.x < rect.x + rect.width) &&\n                (pos.y > rect.y) && (pos.y < rect.y + rect.height)) res.push(block)\n        }\n\n        return res\n    }\n\n    getChildIdx(blockUid: string, parentUid: string, y: number): [number, number[]] {\n        if (!this.diagramStructure) throw new Error(\"Diagram data not defined\")\n        let uids: string[] = []\n        let outputConnections = this.diagramStructure.blockConnections.output\n        for (let connection of outputConnections.get(parentUid)) {\n            uids.push(connection.to.blockUid)\n        }\n\n        uids = uids.filter(uid => (blockUid !== uid))\n        logDiagramBlockLayout.info(`Found child uids ${uids}`)\n\n        let blocks: DiagramBlock[] = uids.map(uid => this.diagramStructure.blocks.get(uid) as DiagramBlock)\n\n\n\n\n\n        let blockIdxs: number[] = blocks.map(block => this.diagramStructure.scene.diagramBlocks.indexOf(block)).sort((a, b) => a - b);\n        let data = blockIdxs.map(blockIdx => [blockIdx, this.diagramStructure.scene.diagramBlocks[blockIdx].rect.y, this.diagramStructure.scene.diagramBlocks[blockIdx].rect.height])\n        logDiagramBlockLayout.info(() => `getChildIdx block rects ${data}`)\n        let i = 0;\n        for (let idx of blockIdxs) {\n            let block = this.diagramStructure.scene.diagramBlocks[idx]\n            let rect = block.rect\n            let yc = rect.y + rect.height / 2\n            if (y < yc) break\n            i++\n        }\n        return [i, blockIdxs]\n    }\n\n    getColumnIdx(xp: number): number | null {\n        let maxColumnIdx: number = Math.max(...Array.from(this.columnWidth.keys()))\n        let minColumnIdx: number = Math.min(...Array.from(this.columnWidth.keys()))\n        let x0 = - (this.columnWidth.get(0) as number) / 2\n        if (xp >= x0) {\n\n            for (let columnIdx = 0; columnIdx <= maxColumnIdx; ++columnIdx) {\n                x0 += this.columnWidth.get(columnIdx) as number\n                if (xp < x0) return columnIdx\n                x0 += this.parameters.hMargin\n            }\n            return null\n        }\n        else {\n            for (let columnIdx = -1; columnIdx >= minColumnIdx; --columnIdx) {\n                x0 -= this.columnWidth.get(columnIdx) as number\n                if (xp > x0) return columnIdx\n                x0 -= this.parameters.hMargin\n            }\n            return null\n        }\n    }\n\n\n}","import { DiagramBlock } from \"./DiagramBlock\";\nimport { observable, action, autorun, toJS, computed } from \"mobx\";\nimport { DiagramButtonLayout } from \"../layout/DiagramButtonLayout\";\nimport { DiagramButton } from \"./DiagramButton\";\nimport { DiagramConnection } from \"./DiagramConnection\";\nimport { DiagramStructure } from \"./DiagramStructure\";\nimport { DiagramSlotLayout } from \"../layout/DiagramSlotLayout\";\nimport { DiagramConnectionLayout } from \"../layout/DiagramConnectionLayout\";\nimport { DiagramBlockLayout } from \"../layout/DiagramBlockLayout\";\nimport { Vec2d } from \"./helpers\";\nimport { DiagramImage } from \"./DiagramImage\";\n\n\nexport class DiagramScene {\n    @observable diagramBlocks: DiagramBlock[]\n    @observable diagramConnections: DiagramConnection[]\n    @observable activeButtons: DiagramButton[] = []\n    @observable private _editedBlock?: DiagramBlock\n    @observable private _selectedBlock?: DiagramBlock\n    @observable private _previousSelection?: DiagramBlock\n\n    @observable onEdit: boolean = false\n    @observable structureChanging: boolean = false\n    @observable sceneTranslate: Vec2d = { x: 512, y: 500 }\n    @observable sceneTranslateDelta: Vec2d = { x: 0, y: 0 }\n    @observable image?: DiagramImage\n\n    diagramStructure: DiagramStructure\n\n    buttonLayout = new DiagramButtonLayout()\n    slotLayout: DiagramSlotLayout\n    blockLayout: DiagramBlockLayout\n    connectionLayout: DiagramConnectionLayout\n    private _previouseName: string = ''\n    oldEditedBlock?: DiagramBlock\n    constructor(diagramBlocks: DiagramBlock[] = [], diagramConnections: DiagramConnection[] = []) {\n        this.diagramBlocks = diagramBlocks\n        this.diagramConnections = diagramConnections\n        this.diagramStructure = new DiagramStructure(this)\n        this.slotLayout = new DiagramSlotLayout(this.diagramStructure)\n        this.blockLayout = new DiagramBlockLayout(this.diagramStructure)\n        this.connectionLayout = new DiagramConnectionLayout(this.diagramStructure)\n        autorun(() => {\n            let changed = false\n            for (let block of this.diagramBlocks) {\n                if (block.requestedWidth && block.finishedEditing && (block.rect.width != block.requestedWidth)) {\n                    block.rect.width = block.requestedWidth\n                    changed = true\n                }\n            }\n            if (changed) this.layout()\n        }, { name: \"asd\" })\n\n    }\n\n    @computed get editedBlock() { return this._editedBlock }\n    @computed get selectedBlock() { return this._selectedBlock }\n    setEditedBlock(block?: DiagramBlock, cancel  = false) {\n\n        if (this._editedBlock && this._editedBlock.requestedWidth && this._editedBlock.requestedWidth != this._editedBlock.rect.width) {\n            this._editedBlock.finishedEditing = true\n        }\n        if (block !== undefined) { this._previouseName = block.name }\n        if (cancel && this._editedBlock) { this._editedBlock.name = this._previouseName}\n        this._editedBlock = block\n\n    }\n\n    set selectedBlock(block: DiagramBlock | undefined) {\n        if (block != this._selectedBlock) {\n\n\n            if (block == undefined) {\n                this._selectedBlock = this._previousSelection\n            } else {\n                this._previousSelection = this._selectedBlock\n\n                this._selectedBlock = block\n            }\n            console.log(\"select block\", block, this._previousSelection)\n\n        }\n    }\n\n\n    showBlockButtons(block: DiagramBlock, buttons: DiagramButton[]) {\n        //setting button positions\n        this.buttonLayout.layoutBlockButtons(block, buttons)\n        this.activeButtons = buttons\n        for (let button of buttons) { button.on(\"click\", () => { this.activeButtons = [] }) }\n    }\n\n    @action layout() {\n        if (this.diagramBlocks.length > 0) {\n\n            this.slotLayout.layout()\n            this.blockLayout.layout()\n            this.connectionLayout.layout()\n        }\n\n    }\n    @action up(): void {\n        if (this.selectedBlock) {\n            let columnIdx = this.diagramStructure.getBlockColumnIdx(this.selectedBlock)\n            let blocks = this.diagramStructure.columnBlocks.get(columnIdx)\n            let blockIdx = blocks.indexOf(this.selectedBlock)\n            if (blockIdx > 0) this.selectedBlock = blocks[blockIdx - 1]\n        }\n    }\n    @action down(): void {\n        if (this.selectedBlock) {\n            let columnIdx = this.diagramStructure.getBlockColumnIdx(this.selectedBlock)\n            let blocks = this.diagramStructure.columnBlocks.get(columnIdx)\n            let blockIdx = blocks.indexOf(this.selectedBlock)\n            if (blockIdx < blocks.length - 1) this.selectedBlock = blocks[blockIdx + 1]\n        }\n    }\n    @action left(): void {\n        if (this.selectedBlock) {\n            let side = this.diagramStructure.blockSide(this.selectedBlock)\n            if (side === 1) {\n                this.selectParent()\n            } else {\n                this.selectChild(-1)\n            }\n        }\n\n    }\n    @action right(): void {\n        if (this.selectedBlock) {\n            let side = this.diagramStructure.blockSide(this.selectedBlock)\n\n            if (side === -1) {\n                this.selectParent()\n            } else {\n                this.selectChild(1)\n            }\n        }\n    }\n\n    @action edit() {\n        if (this.selectedBlock) {\n            this.setEditedBlock(this.selectedBlock)\n        }\n    }\n\n\n    selectParent() {\n        if (this.selectedBlock) {\n            this.selectedBlock = this.diagramStructure.getParentBlock(this.selectedBlock)\n        }\n    }\n\n    selectChild(rootDir: 1 | -1) {\n        if (this.selectedBlock) {\n            let childBlock = this.diagramStructure.getFistChildBlock(this.selectedBlock, rootDir)\n\n            if (childBlock)\n                this.selectedBlock = childBlock\n        }\n    }\n\n\n\n}","import { DiagramScene } from \"../state/DiagramScene\";\nimport { DiagramBlock } from \"../state/DiagramBlock\";\nimport { DiagramSlot } from \"../state/DiagramSlot\";\nimport { uuidv4, Rect } from \"../state/helpers\";\nimport { DiagramConnection } from \"../state/DiagramConnection\";\n\n\ninterface DiagramBlockJSON {\n    name: string,\n    children?: DiagramBlockJSON[]\n}\n\nexport interface DiagramSceneJSON {\n    root: {\n        name: string,\n        children?: {\n            left?: DiagramBlockJSON[],\n            right?: DiagramBlockJSON[]\n        }\n    }\n}\n\nexport class DiagramConvert {\n    static fromJSON(json: DiagramSceneJSON): DiagramScene {\n        let scene = new DiagramScene()\n        let rootBlock = new DiagramBlock(uuidv4(), json.root.name, \"mmroot\", [new DiagramSlot(\"ol\", \"o\"), new DiagramSlot(\"or\", \"o\")], new Rect(0,0,200,30))\n\n        scene.diagramBlocks.push(rootBlock)\n        if (json.root.children && json.root.children.left) {\n            this.addChildBlocksFromJson(json.root.children.left, scene, rootBlock, true)\n        }\n        if (json.root.children && json.root.children.right) {\n            this.addChildBlocksFromJson(json.root.children.right, scene, rootBlock, false)\n        }\n\n        return scene\n    }\n\n    static addChildBlocksFromJson(jsonBlocks: DiagramBlockJSON[], scene: DiagramScene, parentBlock: DiagramBlock, left?: boolean) {\n        for (let jsonBlock of jsonBlocks) {\n            let block = new DiagramBlock(uuidv4(), jsonBlock.name, \"mm\", [new DiagramSlot(\"i\", \"i\"), new DiagramSlot(\"o\", \"o\")], new Rect(0,0,100,30))\n            scene.diagramBlocks.push(block)\n            if (parentBlock.type == \"mmroot\") {\n                if (left) scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: 'ol' }, { blockUid: block.uid, slot: \"i\" }, \"mm\"))\n                else scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: 'or' }, { blockUid: block.uid, slot: \"i\" }, \"mm\"))\n            } else {\n                scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: 'o' }, { blockUid: block.uid, slot: \"i\" }, \"mm\"))\n            }\n\n            if (jsonBlock.children)\n                this.addChildBlocksFromJson(jsonBlock.children, scene, block)\n\n        }\n\n    }\n\n    static toJSON(scene: DiagramScene): DiagramSceneJSON {\n        let rootBlock = scene.diagramBlocks[0]\n        let result: DiagramSceneJSON = {\n            root: { name: rootBlock.name }\n        }\n        let leftConnections = scene.diagramStructure.getOutputSlotConnections(rootBlock.uid, \"ol\")\n        if (leftConnections.length > 0) {\n            result.root.children = { left: this.addChildBlocksFromScene(leftConnections, scene) }\n        }\n        let rightConnections = scene.diagramStructure.getOutputSlotConnections(rootBlock.uid, \"or\")\n        if (rightConnections.length > 0) {\n            if (result.root.children) result.root.children.right = this.addChildBlocksFromScene(rightConnections, scene)\n            else result.root.children = { right: this.addChildBlocksFromScene(rightConnections, scene) }\n        }\n        return result\n    }\n\n    static addChildBlocksFromScene(connections: DiagramConnection[], scene: DiagramScene): DiagramBlockJSON[] {\n        let res: DiagramBlockJSON[] = []\n        for (let connection of connections) {\n            let block = scene.diagramStructure.blocks.get(connection.to.blockUid) as DiagramBlock;\n            let newBlock: DiagramBlockJSON = { name: block.name }\n            let connections = scene.diagramStructure.getOutputSlotConnections(block.uid, \"o\")\n            if (connections.length > 0) {\n                newBlock.children = this.addChildBlocksFromScene(connections, scene)\n            }\n            res.push(newBlock)\n        }\n        return res\n\n    }\n}","import React, { Component } from 'react';\nimport { DiagramScene } from '../state/DiagramScene';\nimport styled, { StyledComponent } from 'styled-components';\nimport { observer } from 'mobx-react';\nimport { Rect } from '../state/helpers';\nimport { DiagramBlock } from '../state/DiagramBlock';\nimport { action } from 'mobx';\n\n\nconst EditPosition = styled.div<{ rect: Rect }>`\n    position:absolute;\n    left :${p => p.rect.x}px;\n    top : ${p => p.rect.y}px;\n    width : ${p => p.rect.width}px;\n    height : ${p => p.rect.height}px;\n`\n\nconst MyInput = styled.input`\nwidth: 80%;\nheight: 60%;\nmargin-left: 7%;\nmargin-top:3px;\n`\n\n@observer\nclass MyComponent extends React.Component<{ block: DiagramBlock, onKeyDown: (evt: React.KeyboardEvent<HTMLInputElement>) => void }> {\n\n    private myRef = React.createRef<HTMLInputElement>()\n    focusOut = false\n    constructor(props: any) {\n        super(props)\n    }\n\n    componentDidMount() {\n        this.props.block.finishedEditing = false\n        if (this.myRef.current) {\n            this.myRef.current.focus()\n            this.myRef.current.setSelectionRange(0,this.props.block.name.length)\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.block.finishedEditing = true\n    }\n    handleBlur = (e:React.FocusEvent<HTMLInputElement>) => {\n        if (!e.currentTarget.contains(e.relatedTarget as Node)) {\n            this.props.block.name = e.target.value\n            this.focusOut = true\n        }\n    }\n\n    render() {\n        \n        return (<MyInput ref={this.myRef} type=\"text\" value={this.props.block.name} onFocus={evt=>{this.focusOut = false}} onBlur={evt=> this.handleBlur(evt)} onChange={evt => { if(!this.focusOut) this.props.block.name = evt.target.value; }} onKeyDown={this.props.onKeyDown} />)\n    }\n}\n\n@observer\nexport class DiagramEditComponent extends React.Component<{ scene: DiagramScene }> {\n\n    render() {\n        if (this.props.scene.editedBlock) {\n            let rect = Rect.copy( this.props.scene.editedBlock.rect )\n            rect.x += this.props.scene.sceneTranslate.x\n            rect.y += this.props.scene.sceneTranslate.y\n\n            return <EditPosition rect={rect}><MyComponent block={this.props.scene.editedBlock} onKeyDown={(evt) => this.handleKeyDown(evt)} /></EditPosition>\n        }\n        else {\n            return null\n        }\n\n    }\n    @action\n    private handleKeyDown(evt: React.KeyboardEvent<HTMLInputElement>) {\n        if ((this.props.scene.editedBlock) && (evt.key === \"Enter\")) {\n            this.props.scene.setEditedBlock(undefined)\n            this.props.scene.onEdit = true\n            this.props.scene.activeButtons = [] \n        }\n    }\n\n}","import React from 'react';\nimport styled from 'styled-components'\nimport { DiagramSceneComponent } from '../lib/component/DiagramSceneComponent';\nimport { DiagramScene } from '../lib/state/DiagramScene';\nimport { DiagramBlock } from '../lib/state/DiagramBlock';\nimport { DiagramButton, ButtonIcon } from '../lib/state/DiagramButton';\nimport { uuidv4, Vec2d, removeItems, Rect } from '../lib/state/helpers';\nimport { DiagramConnection } from '../lib/state/DiagramConnection';\nimport { DiagramSlot as Slot, DiagramSlot } from '../lib/state/DiagramSlot';\nimport { action, autorun, observable } from 'mobx';\nimport { DiagramConvert, DiagramSceneJSON } from '../lib/convert/DiagramConvert';\nimport { logMindMap, mindMapDragLog } from '../logging/Config';\nimport { DiagramEditComponent } from '../lib/component/DiagramEditComponent';\nimport { observer } from 'mobx-react';\nimport { DiagramImage } from '../lib/state/DiagramImage';\n\nconst MM = styled.div`\n    position:absolute;\n    width : 100%;\n    height : 100%;\n`\n\n\n\n\n@observer\nexport class MindMapComponent extends React.Component<{ scene: DiagramScene, vscode?: any, jsonDiagram?: DiagramSceneJSON, image?: DiagramImage }>  {\n    @observable diagramScene: DiagramScene\n    addedBlock?: DiagramBlock\n    vscode?: any\n    constructor(props: any) {\n        super(props)\n        this.vscode = this.props.vscode\n        //if (this.props.jsonDiagram) {\n        if (false) {\n            //this.diagramScene = DiagramConvert.fromJSON(this.props.jsonDiagram)\n        } else {\n            this.diagramScene = this.props.scene\n            let rootBlock = new DiagramBlock(uuidv4(), \"Enter diagram name\", \"mmroot\", [new DiagramSlot(\"ol\", \"o\"), new DiagramSlot(\"or\", \"o\")], new Rect(0, 0, 100, 30))\n            this.diagramScene.diagramBlocks.push(rootBlock)\n\n        }\n\n        this.addCallbacks(this.diagramScene.diagramBlocks);\n        this.diagramScene.layout()\n        window.addEventListener('message', event => {\n            const message = event.data; // The JSON data our extension sent\n            switch (message.command) {\n                case \"setJsonDocument\":\n                    logMindMap.info(\"setJsonDocument\", message.document)\n                    let doc: DiagramSceneJSON = message.document\n                    this.vscode.setState(doc)\n                    this.diagramScene = DiagramConvert.fromJSON(doc)\n                    this.diagramScene.layout()\n                    this.addCallbacks(this.diagramScene.diagramBlocks);\n                    break\n                case \"addChild\":\n                    logMindMap.info(\"addChild message\")\n                    if (this.diagramScene.selectedBlock) {\n                        if (this.diagramScene.editedBlock) this.diagramScene.setEditedBlock(undefined)\n                        this.addBlock(this.diagramScene.selectedBlock)\n                    }\n                    break\n                case \"addSibling\":\n                    logMindMap.info(\"addSibling message\")\n                    if (this.diagramScene.selectedBlock) {\n                        if (this.diagramScene.editedBlock) this.diagramScene.setEditedBlock(undefined)\n                        this.addSibling(this.diagramScene.selectedBlock)\n                    }\n                    break\n\n                case \"remove\":\n                    logMindMap.info(\"removeBlock message\")\n                    if (this.diagramScene.selectedBlock) {\n                        if (this.diagramScene.editedBlock) this.diagramScene.setEditedBlock(undefined)\n                        this.removeBlock(this.diagramScene.selectedBlock)\n                    }\n                    break\n                case \"moveLeft\":\n                    logMindMap.info(\"moveLeft message\")\n                    this.diagramScene.left()\n                    break\n                case \"moveRight\":\n                    logMindMap.info(\"moveRight message\")\n                    this.diagramScene.right()\n                    break\n                case \"moveUp\":\n                    logMindMap.info(\"moveUp message\")\n                    this.diagramScene.up()\n                    break\n                case \"moveDown\":\n                    logMindMap.info(\"moveDown message\")\n                    this.diagramScene.down()\n                    break\n                case \"cancel\":\n                    logMindMap.info(\"cancel message\")\n                    this.cancel()\n                    break\n                case \"edit\":\n                    logMindMap.info(\"edit message\")\n                    this.diagramScene.edit()\n                    break\n        \n\n        \n            }\n\n        });\n\n        autorun(() => {\n            if (this.diagramScene.onEdit && !this.diagramScene.editedBlock) {\n                if (this.vscode) {\n                    let jsonDiagram = DiagramConvert.toJSON(this.diagramScene)\n\n                    this.vscode.postMessage({ message: \"setDocument\", document: jsonDiagram })\n                    this.vscode.setState(jsonDiagram)\n\n                }\n                this.diagramScene.onEdit = false\n                this.addedBlock = undefined\n            }\n        })\n    }\n\n    private addCallbacks(blocks: DiagramBlock[]) {\n        for (let block of blocks) {\n            block.on(\"click\", (block: DiagramBlock) => {\n                let addButton = new DiagramButton(\"addB\", \"topRight\", \"add\", \"red\", () => {\n                    this.addBlock(block);\n                });\n\n                let removeButton = new DiagramButton(\"removeB\", \"topRight\", \"remove\", \"red\", () => {\n                    this.removeBlock(block);\n                });\n\n                this.diagramScene.showBlockButtons(block, [addButton, removeButton]);\n            });\n            block.on(\"dragEnd\", (block: DiagramBlock, position: Vec2d) => {\n                logMindMap.info(`Block drag end '${block.name}' (${position.x},${position.y})`)\n                this.endDragging(block, position);\n                this.diagramScene.layout();\n\n            });\n            block.on(\"doubleClick\", (block: DiagramBlock) => {\n                logMindMap.info(`Block double click ${block.uid}`);\n                this.diagramScene.setEditedBlock(block)\n                this.diagramScene.activeButtons = []\n            });\n        }\n    }\n\n    componentDidMount() {\n        if (this.vscode)\n            this.vscode.postMessage({ message: \"getDocument\" })\n        else {\n\n\n        }\n    }\n\n\n    @action\n    removeBlock(block: DiagramBlock) {\n        if (block.type === \"mmroot\") return;\n        logMindMap.info(`removeBlock ${block.name}`)\n        let childBlocks = this.diagramScene.diagramStructure.getChildBlocks(block.uid).map(uid => this.diagramScene.diagramStructure.blocks.get(uid) as DiagramBlock)\n        childBlocks.push(block)\n        let connections: DiagramConnection[] = []\n        for (let block of childBlocks) {\n            connections.push(this.diagramScene.diagramStructure.blockConnections.input.get(block.uid)[0] as DiagramConnection)\n\n        }\n\n        for (let block of childBlocks) {\n            let idx = this.diagramScene.diagramBlocks.indexOf(block)\n            this.diagramScene.diagramBlocks.splice(idx, 1)\n        }\n\n        for (let connection of connections) {\n            let idx = this.diagramScene.diagramConnections.indexOf(connection)\n            this.diagramScene.diagramConnections.splice(idx, 1)\n\n        }\n        this.diagramScene.layout()\n        this.diagramScene.onEdit = true;\n        this.diagramScene.selectedBlock = undefined\n        this.diagramScene.activeButtons = []\n    }\n\n\n    @action\n    addSibling(block: DiagramBlock) {\n        if (block.type != \"mmroot\") {\n            let parentUid = this.diagramScene.diagramStructure.blockConnections.input.get(block.uid)[0].from.blockUid\n            let parentBlock = this.diagramScene.diagramStructure.blocks.get(parentUid) as DiagramBlock\n            this.addBlock(parentBlock)\n            this.diagramScene.activeButtons = []\n        }\n\n    }\n\n    @action\n    addBlock(parentBlock: DiagramBlock) {\n        logMindMap.info(`addBlock (parent=${parentBlock.name})`)\n        let block = new DiagramBlock(uuidv4(), \"Unnamed element\", \"mm\", [new Slot(\"i\", \"i\"), new Slot(\"o\", \"o\")], new Rect(0, 0, 100, 30))\n        this.addCallbacks([block])\n\n        let newConnection: DiagramConnection\n        if (parentBlock.type === \"mmroot\") {\n            newConnection = new DiagramConnection({ blockUid: parentBlock.uid, slot: \"or\" }, { blockUid: block.uid, slot: \"i\" }, \"mm\")\n        }\n        else {\n            newConnection = new DiagramConnection({ blockUid: parentBlock.uid, slot: \"o\" }, { blockUid: block.uid, slot: \"i\" }, \"mm\")\n        }\n        this.diagramScene.diagramBlocks.push(block)\n        this.diagramScene.diagramConnections.push(newConnection)\n\n        this.diagramScene.layout()\n        this.diagramScene.setEditedBlock(block)\n        this.diagramScene.selectedBlock = block\n        this.diagramScene.onEdit = true\n        this.diagramScene.activeButtons = []\n        this.addedBlock = block\n\n    }\n\n    @action cancel() {\n        if (this.addedBlock) {\n            this.removeBlock(this.addedBlock)\n            this.addedBlock = undefined\n            this.diagramScene.setEditedBlock(undefined)\n            this.diagramScene.selectedBlock = undefined\n        } else if (this.diagramScene.editedBlock) {\n            this.diagramScene.setEditedBlock(undefined, true)\n        }\n\n\n\n\n    }\n\n    @action\n    endDragging(block: DiagramBlock, dragPosition: Vec2d) {\n        logMindMap.info(`endDragging ${block.name} : (${dragPosition.x}, ${dragPosition.y})`)\n        if (block.type === \"mmroot\") return;\n\n\n        let layout = this.diagramScene.blockLayout\n        let scene = this.diagramScene\n        let structure = scene.diagramStructure\n        let inputConnections = structure.blockConnections.input.get(block.uid)\n        let inputBlock = structure.blocks.get(inputConnections[0].from.blockUid) as DiagramBlock\n\n        let childBlocks = this.diagramScene.diagramStructure.getChildBlocks(block.uid).map(uid => this.diagramScene.diagramStructure.blocks.get(uid) as DiagramBlock)\n        let occupiedBlocks = layout.getBlocks(dragPosition)\n        occupiedBlocks = removeItems(occupiedBlocks, block, ...childBlocks)\n        mindMapDragLog.info(`found N occupied blocks ${occupiedBlocks.length}`)\n        if (occupiedBlocks.length > 0) {\n            let parentBlock = occupiedBlocks[0]\n\n            let blockUids = [block.uid].concat(structure.getChildBlocks(block.uid))\n            let blocks = blockUids.map(blockUid => structure.blocks.get(blockUid) as DiagramBlock)\n            this.diagramScene.diagramConnections = removeItems(scene.diagramConnections, structure.blockConnections.input.get(block.uid)[0])\n\n            this.diagramScene.diagramBlocks = removeItems(this.diagramScene.diagramBlocks, ...blocks)\n\n            //let parentBlock = this.diagramData.getBlock(parentBlockUid)\n            let parentBlockIdx = scene.diagramBlocks.indexOf(parentBlock)\n\n            scene.diagramBlocks.splice(parentBlockIdx + 1, 0, ...blocks)\n            if (parentBlock.type === \"mmroot\") {\n                if (dragPosition.x > 0)\n                    scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: \"or\" }, { blockUid: blockUids[0], slot: \"i\" }, \"mm\"))\n                else\n                    scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: \"ol\" }, { blockUid: blockUids[0], slot: \"i\" }, \"mm\"))\n            } else\n                scene.diagramConnections.push(new DiagramConnection({ blockUid: parentBlock.uid, slot: \"o\" }, { blockUid: blockUids[0], slot: \"i\" }, \"mm\"))\n            scene.layout()\n\n            this.diagramScene.onEdit = true;\n\n            //layout.layout()\n        }\n\n        else {\n            if (inputBlock.type === \"mmroot\") {\n                if (dragPosition.x > 0) {\n                    inputConnections[0].from.slot = \"or\"\n                } else {\n                    inputConnections[0].from.slot = \"ol\"\n                }\n            }\n\n            {\n\n                // let blockColumn = layout.getBlockColumn(block.uid)\n                // let positionColumn = layout.getColumnIdx(dragPosition.x)\n                // mindMapDragLog.info(`Block column ${blockColumn}, position column ${positionColumn}`)\n                // if (positionColumn === blockColumn) {\n                let connection = inputConnections[0]\n                let [idx, blockIdxs] = layout.getChildIdx(block.uid, connection.from.blockUid, dragPosition.y)\n                mindMapDragLog.info(`Child idx ${blockIdxs}[${idx}]`)\n                if (blockIdxs.length > 0) {\n                    let newIdx = -1;\n                    let nextBlock: DiagramBlock | null = null\n                    if (idx === blockIdxs.length) {\n                    } else {\n                        newIdx = blockIdxs[idx]\n                        nextBlock = scene.diagramBlocks[newIdx]\n                    }\n\n                    let blockUids = [block.uid].concat(structure.getChildBlocks(block.uid))\n                    let blocks = blockUids.map(blockUid => structure.blocks.get(blockUid) as DiagramBlock)\n\n                    scene.diagramBlocks = removeItems(scene.diagramBlocks, ...blocks)\n\n                    if (nextBlock) {\n                        let nextConnection = scene.diagramStructure.blockConnections.input.get(nextBlock.uid)[0]\n                        let nextConnectionIdx = scene.diagramConnections.indexOf(nextConnection)\n                        let cidx = this.diagramScene.diagramConnections.indexOf(connection)\n                        this.diagramScene.diagramConnections.splice(cidx, 1)\n                        this.diagramScene.diagramConnections.splice(nextConnectionIdx - 1, 0, connection)\n\n                        let idx = scene.diagramBlocks.indexOf(nextBlock)\n                        scene.diagramBlocks.splice(idx, 0, ...blocks)\n                    }\n                    else {\n                        scene.diagramBlocks.push(...blocks)\n                        let cidx = this.diagramScene.diagramConnections.indexOf(connection)\n                        this.diagramScene.diagramConnections.splice(cidx, 1)\n                        this.diagramScene.diagramConnections.push(connection)\n\n                    }\n\n\n                }\n\n                scene.layout()\n                this.diagramScene.onEdit = true;\n\n\n\n            }\n\n        }\n\n    }\n\n    render() {\n        return <div>\n            {!this.props.vscode &&\n                <div>\n                    <button onClick={evt => this.diagramScene.up()}>up</button>\n                    <button onClick={evt => this.diagramScene.down()}>down</button>\n                    <button onClick={evt => this.diagramScene.left()}>left</button>\n                    <button onClick={evt => this.diagramScene.right()}>right</button>\n                    <button onClick={evt => this.cancel()}>cancel</button>\n                    <button onClick={evt => this.diagramScene.edit()}>edit</button>\n                </div>}\n            <MM>\n\n                <DiagramEditComponent scene={this.diagramScene}></DiagramEditComponent>\n                <DiagramSceneComponent diagramScene={this.diagramScene}></DiagramSceneComponent>\n            </MM>\n        </div>\n    }\n\n}","\nexport class DiagramImage {\n    image : string\n\n    constructor(image :string) {\n        this.image = image\n    }\n}","import React, { useState } from 'react';\nimport './App.css';\nimport { MindMapComponent } from './components/MindMapComponent';\nimport { DiagramImage } from './lib/state/DiagramImage';\nimport { DiagramScene } from './lib/state/DiagramScene';\n\n\ndeclare var acquireVsCodeApi: any;\n\nconst App: React.FC = () => {\n  let scene = new DiagramScene()\n\n  function setImageUrl(evt: React.ChangeEvent<HTMLInputElement>) {\n    if (evt.target.files && evt.target.files.length > 0) {\n      var fr = new FileReader();\n      fr.onload = function () {\n        let newImage = new DiagramImage(fr.result as string)\n        scene.diagramBlocks[0].image = newImage\n      }\n      fr.readAsDataURL(evt.target.files[0]);\n    }\n  }\n\n\n  if (typeof acquireVsCodeApi !== 'undefined') {\n    let vscode = acquireVsCodeApi()\n    let jsonDiagram = vscode.getState()\n    return (\n      <div>\n\n        <MindMapComponent scene={scene} jsonDiagram={jsonDiagram} vscode={vscode}  />\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        <input type=\"file\" name=\"picField\" id=\"picField\" onChange={(evt) => { setImageUrl(evt) }} />\n        \n        <MindMapComponent scene={scene} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}